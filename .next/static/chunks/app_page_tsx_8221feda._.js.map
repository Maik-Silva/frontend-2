{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/maik_/meu-site/frontend/app/page.tsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect, useRef, type CSSProperties } from \"react\";\n\nconst BASE_URL = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:5000\";\n\nexport default function Home() {\n  const [baseFood, setBaseFood] = useState(\"\");\n  const [baseSuggestions, setBaseSuggestions] = useState<string[]>([]);\n  const [baseQuantity, setBaseQuantity] = useState(\"\");\n  const [substituteFood, setSubstituteFood] = useState(\"\");\n  const [substituteSuggestions, setSubstituteSuggestions] = useState<string[]>([]);\n  const [equivalence, setEquivalence] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [warning, setWarning] = useState<string | null>(null);\n  const [showResult, setShowResult] = useState(false);\n\n  const [suggestionInput, setSuggestionInput] = useState(\"\");\n  const [suggestionStatus, setSuggestionStatus] = useState(\"\");\n\n  const baseFoodSelected = useRef(false);\n  const substituteFoodSelected = useRef(false);\n\n  const fetchSuggestions = async (\n    query: string,\n    setSuggestions: (val: string[]) => void,\n    foodSelected: React.MutableRefObject<boolean>\n  ) => {\n    if (!query.trim() || foodSelected.current) {\n      setSuggestions([]);\n      foodSelected.current = false;\n      return;\n    }\n    try {\n      const response = await fetch(\n        `${BASE_URL}/api/sugestoes?query=${encodeURIComponent(query)}`\n      );\n      const data = await response.json();\n      setSuggestions(data.sugestoes || []);\n    } catch (err) {\n      console.error(\"Erro ao buscar sugestões:\", err);\n    }\n  };\n\n  useEffect(() => {\n    fetchSuggestions(baseFood, setBaseSuggestions, baseFoodSelected);\n  }, [baseFood]);\n\n  useEffect(() => {\n    fetchSuggestions(substituteFood, setSubstituteSuggestions, substituteFoodSelected);\n  }, [substituteFood]);\n\n  const handleSelectSuggestion = (\n    food: string,\n    setFood: (v: string) => void,\n    setSuggestions: (v: string[]) => void,\n    foodSelected: React.MutableRefObject<boolean>\n  ) => {\n    setFood(food);\n    setSuggestions([]);\n    foodSelected.current = true;\n  };\n\n  const calculateEquivalence = async () => {\n    if (!baseFood || !baseQuantity || !substituteFood) {\n      setError(\"Preencha todos os campos!\");\n      setShowResult(false);\n      return;\n    }\n    setLoading(true);\n    setError(null);\n    setWarning(null);\n    setShowResult(false);\n    try {\n      const response = await fetch(\n        `${BASE_URL}/api/equivalencia?baseFood=${encodeURIComponent(\n          baseFood\n        )}&baseQuantity=${encodeURIComponent(\n          baseQuantity\n        )}&substituteFood=${encodeURIComponent(substituteFood)}`\n      );\n      const data = await response.json();\n      if (data.baseGroup && data.substituteGroup && data.baseGroup !== data.substituteGroup) {\n        setWarning(\n          `⚠️ Essa troca pode não ser ideal. \"${baseFood}\" pertence a \"${data.baseGroup}\" e \"${substituteFood}\" pertence a \"${data.substituteGroup}\".`\n        );\n      }\n      setEquivalence(\n        `${data.baseQuantity}g de ${data.baseFood} equivale a ${data.equivalentQuantity}g de ${data.substituteFood}`\n      );\n      setShowResult(true);\n    } catch (err) {\n      setError(\"Erro ao calcular substituição.\");\n      console.error(\"Erro ao buscar equivalência:\", err);\n      setShowResult(false);\n    }\n    setLoading(false);\n  };\n\n  const enviarSugestao = async () => {\n    if (!suggestionInput.trim()) {\n      setSuggestionStatus(\"Digite um alimento para sugerir.\");\n      return;\n    }\n    try {\n      const res = await fetch(\"/api/proxyForm\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ alimento: suggestionInput }),\n      });\n      if (res.ok) {\n        setSuggestionStatus(\"✅ Sugestão enviada com sucesso!\");\n        setSuggestionInput(\"\");\n      } else {\n        setSuggestionStatus(\"❌ Erro ao enviar sugestão.\");\n      }\n    } catch (error) {\n      console.error(\"Erro ao enviar sugestão:\", error);\n      setSuggestionStatus(\"❌ Erro ao enviar sugestão.\");\n    }\n  };\n\n  return (\n    <div style={styles.container}>\n      <h1 style={styles.title}>Calculadora de Substituição</h1>\n\n      <div style={styles.inputContainer}>\n        <input\n          type=\"text\"\n          placeholder=\"Digite o alimento base\"\n          value={baseFood}\n          onChange={(e) => setBaseFood(e.target.value)}\n          style={styles.input}\n        />\n        {baseSuggestions.length > 0 && (\n          <ul style={styles.suggestionsList}>\n            {baseSuggestions.map((food, index) => (\n              <li\n                key={index}\n                onClick={() =>\n                  handleSelectSuggestion(\n                    food,\n                    setBaseFood,\n                    setBaseSuggestions,\n                    baseFoodSelected\n                  )\n                }\n                style={styles.suggestionItem}\n              >\n                {food}\n              </li>\n            ))}\n          </ul>\n        )}\n\n        <input\n          type=\"number\"\n          placeholder=\"Quantidade em gramas\"\n          value={baseQuantity}\n          onChange={(e) => setBaseQuantity(e.target.value)}\n          style={styles.input}\n        />\n\n        <input\n          type=\"text\"\n          placeholder=\"Digite o alimento substituto\"\n          value={substituteFood}\n          onChange={(e) => setSubstituteFood(e.target.value)}\n          style={styles.input}\n        />\n        {substituteSuggestions.length > 0 && (\n          <ul style={styles.suggestionsList}>\n            {substituteSuggestions.map((food, index) => (\n              <li\n                key={index}\n                onClick={() =>\n                  handleSelectSuggestion(\n                    food,\n                    setSubstituteFood,\n                    setSubstituteSuggestions,\n                    substituteFoodSelected\n                  )\n                }\n                style={styles.suggestionItem}\n              >\n                {food}\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n\n      <button onClick={calculateEquivalence} style={styles.button} disabled={loading}>\n        {loading ? \"Calculando...\" : \"Calcular Substituição\"}\n      </button>\n\n      {showResult && (\n        <div className=\"centralizado\">\n          {equivalence && <p style={styles.result}>{equivalence}</p>}\n          {error && <p style={styles.error}>{error}</p>}\n          {warning && <p style={styles.warning}>{warning}</p>}\n        </div>\n      )}\n\n      <hr style={{ margin: \"30px 0\" }} />\n\n      <div>\n        <h2 style={styles.title}>Sugerir novo alimento</h2>\n        <input\n          type=\"text\"\n          placeholder=\"Digite sua sugestão\"\n          value={suggestionInput}\n          onChange={(e) => setSuggestionInput(e.target.value)}\n          style={styles.input}\n        />\n        <button onClick={enviarSugestao} style={styles.button}>\n          Enviar Sugestão\n        </button>\n        {suggestionStatus && <p style={{ marginTop: 10 }}>{suggestionStatus}</p>}\n      </div>\n    </div>\n  );\n}\n\nconst styles: { [key: string]: CSSProperties } = {\n  container: { textAlign: \"center\", padding: \"20px\", fontFamily: \"Poppins, sans-serif\" },\n  title: { marginBottom: \"20px\", color: \"#04451c\" },\n  inputContainer: { marginBottom: \"20px\", position: \"relative\" },\n  input: {\n    padding: \"12px\",\n    borderRadius: \"15px\",\n    border: \"2px solid #094e22\",\n    width: \"80%\",\n    fontSize: \"16px\",\n    marginBottom: \"10px\",\n    outline: \"none\",\n  },\n  suggestionsList: {\n    listStyle: \"none\",\n    padding: 0,\n    margin: 0,\n    background: \"#fff\",\n    border: \"1px solid #ccc\",\n    borderRadius: \"5px\",\n    position: \"absolute\",\n    width: \"80%\",\n    maxHeight: \"150px\",\n    overflowY: \"auto\",\n    zIndex: 10,\n  },\n  suggestionItem: { padding: \"10px\", cursor: \"pointer\", borderBottom: \"1px solid #ddd\" },\n  button: {\n    backgroundColor: \"#04451c\",\n    color: \"white\",\n    border: \"none\",\n    padding: \"12px 20px\",\n    borderRadius: \"25px\",\n    cursor: \"pointer\",\n    fontSize: \"16px\",\n    transition: \"0.3s\",\n  },\n  error: { color: \"red\", fontSize: \"16px\", marginTop: \"15px\" },\n  warning: { color: \"red\", fontSize: \"16px\", marginTop: \"15px\", fontWeight: \"bold\" },\n  result: { marginTop: \"20px\", fontSize: \"18px\", fontWeight: \"bold\", color: \"#023013\" },\n};\n"],"names":[],"mappings":"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","debugId":null}}]
}